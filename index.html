<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üîÆ IA de Fus√£o de Itens</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }

        .header h1 {
            font-size: 3em;
            margin-bottom: 10px;
            animation: glow 2s ease-in-out infinite alternate;
        }

        @keyframes glow {
            from { text-shadow: 0 0 10px #fff, 0 0 20px #fff, 0 0 30px #667eea; }
            to { text-shadow: 0 0 20px #fff, 0 0 30px #764ba2, 0 0 40px #764ba2; }
        }

        .main-content {
            display: grid;
            /* Ajusta automaticamente entre 1 e 4 colunas dependendo do espa√ßo */
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .item-card {
            background: rgba(255, 255, 255, 0.95);
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .item-card h2 {
            color: #667eea;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .input-group {
            margin-bottom: 15px;
        }

        .input-group label {
            display: block;
            color: #555;
            font-weight: bold;
            margin-bottom: 5px;
            font-size: 14px;
        }

        .input-group input, .input-group select {
            width: 100%;
            padding: 12px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
        }

        .input-group input:focus, .input-group select:focus {
            outline: none;
            border-color: #667eea;
        }

        .material-search {
            position: relative;
        }

        .material-suggestions {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            background: white;
            border: 2px solid #667eea;
            border-top: none;
            border-radius: 0 0 8px 8px;
            max-height: 200px;
            overflow-y: auto;
            z-index: 1000;
            display: none;
        }

        .material-suggestions.show {
            display: block;
        }

        .material-suggestion-item {
            padding: 10px;
            cursor: pointer;
            transition: background 0.2s;
            border-bottom: 1px solid #eee;
        }

        .material-suggestion-item:hover {
            background: #f0f0f0;
        }

        .material-suggestion-item .material-category {
            font-size: 11px;
            color: #666;
            font-style: italic;
        }

        .attributes-container {
            display: grid;
            grid-template-columns: 1fr;
            gap: 10px;
            margin-top: 10px;
        }

        .attr-input {
            display: flex;
            gap: 5px;
        }

        .attr-input input {
            flex: 1;
        }

        .btn-add-attr {
            background: #667eea;
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            margin-top: 10px;
        }

        .btn-add-attr:hover {
            background: #5568d3;
        }

        .btn-remove-attr {
            background: #e74c3c;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
        }

        .fusion-button {
            grid-column: 1 / -1;
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 20px;
            font-size: 24px;
            font-weight: bold;
            border-radius: 15px;
            cursor: pointer;
            box-shadow: 0 5px 20px rgba(245, 87, 108, 0.4);
            transition: transform 0.2s;
        }

        .fusion-button:hover {
            transform: scale(1.05);
        }

        .fusion-button:active {
            transform: scale(0.95);
        }

        .result-container {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            display: none;
        }

        .result-container.show {
            display: block;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .result-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 30px;
            border-radius: 10px;
            margin-bottom: 20px;
        }

        .result-item h3 {
            font-size: 2em;
            margin-bottom: 15px;
            text-align: center;
        }

        .result-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .stat-box {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 8px;
            backdrop-filter: blur(10px);
        }

        .stat-box strong {
            display: block;
            font-size: 1.2em;
            margin-bottom: 5px;
        }

        .fusion-animation {
            text-align: center;
            padding: 40px;
            font-size: 3em;
        }

        .rarity {
            display: inline-block;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            margin-top: 10px;
        }

        .rarity.comum { background: #95a5a6; }
        .rarity.incomum { background: #2ecc71; }
        .rarity.raro { background: #3498db; }
        .rarity.epico { background: #9b59b6; }
        .rarity.lendario { background: #f39c12; }
        .rarity.mitico { background: #e74c3c; }

        .effects-list {
            margin-top: 15px;
            padding: 15px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 8px;
        }

        .effects-list div {
            padding: 5px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.2);
        }

        .effects-list div:last-child {
            border-bottom: none;
        }

        @media (max-width: 768px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üîÆ IA de Fus√£o de Itens RPG</h1>
            <p>Combine itens de QUALQUER material - Metais, Elementos, Cristais e mais!</p>
        </div>

        <div class="main-content">
            <div class="item-card">
                <h2>‚öîÔ∏è Item 1</h2>
                <div class="input-group">
                    <label>Nome do Item</label>
                    <input type="text" id="item1-name" placeholder="Ex: Espada de Ferro">
                </div>
                <div class="input-group">
                    <label>Tipo</label>
                    <select id="item1-type">
                        <option value="espada">Espada</option>
                        <option value="machado">Machado</option>
                        <option value="lan√ßa">Lan√ßa</option>
                        <option value="capa">Capa</option>
                        <option value="peitoral">Peitoral</option>                      
                        <option value="arco">Arco</option>
                        <option value="brinco">Brinco</option>
                        <option value="cajado">Cajado</option>
                        <option value="varinha">Varinha</option>
                        <option value="pulseira">Pulseira</option>
                        <option value="gargantilha">Gargantilha</option>
                        <option value="martelo">Martelo</option>
                        <option value="adaga">Adaga</option>
                        <option value="cal√ßa">Cal√ßa</option>
                        <option value="escudo">Escudo</option>
                        <option value="capacete">Capacete</option>
                        <option value="botas">Botas</option>
                        <option value="luvas">Luvas</option>
                        <option value="anel">Anel</option>
                        <option value="amuleto">Amuleto</option>
                        <option value="colar">Colar</option>
                    </select>
                </div>
                <div class="input-group material-search">
                    <label>Material (digite para buscar)</label>
                    <input type="text" id="item1-material" placeholder="Ex: ferro, fogo, diamante..." autocomplete="off">
                    <div class="material-suggestions" id="item1-suggestions"></div>
                </div>
                <div class="input-group">
                    <label>Atributos</label>
                    <div id="item1-attributes">
                        <div class="attr-input">
                            <select class="attr-name">
                                <option value="">Selecione o atributo</option>
                                <optgroup label="‚öîÔ∏è COMBATE">
                                    <option value="Dano">Dano</option>
                                    <option value="Dano F√≠sico">Dano F√≠sico</option>
                                    <option value="Dano M√°gico">Dano M√°gico</option>
                                    <option value="Dano Cr√≠tico">Dano Cr√≠tico</option>
                                    <option value="Taxa de Cr√≠tico">Taxa de Cr√≠tico</option>
                                    <option value="Penetra√ß√£o de Armadura">Penetra√ß√£o de Armadura</option>
                                    <option value="Precis√£o">Precis√£o</option>
                                    <option value="Alcance">Alcance</option>
                                </optgroup>
                                <optgroup label="üõ°Ô∏è DEFESA">
                                    <option value="Defesa">Defesa</option>
                                    <option value="Defesa F√≠sica">Defesa F√≠sica</option>
                                    <option value="Defesa M√°gica">Defesa M√°gica</option>
                                    <option value="Resist√™ncia">Resist√™ncia</option>
                                    <option value="Bloqueio">Bloqueio</option>
                                    <option value="Evas√£o">Evas√£o</option>
                                    <option value="Redu√ß√£o de Dano">Redu√ß√£o de Dano</option>
                                </optgroup>
                                <optgroup label="‚ù§Ô∏è VITALIDADE">
                                    <option value="Vida">Vida</option>
                                    <option value="HP M√°ximo">HP M√°ximo</option>
                                    <option value="Regenera√ß√£o de Vida">Regenera√ß√£o de Vida</option>
                                    <option value="Roubo de Vida">Roubo de Vida</option>
                                </optgroup>
                                <optgroup label="üîÆ ENERGIA">
                                    <option value="Mana">Mana</option>
                                    <option value="Mana M√°xima">Mana M√°xima</option>
                                    <option value="Regenera√ß√£o de Mana">Regenera√ß√£o de Mana</option>
                                    <option value="Custo de Habilidade">Custo de Habilidade</option>
                                </optgroup>
                                <optgroup label="‚ö° VELOCIDADE">
                                    <option value="Velocidade de Ataque">Velocidade de Ataque</option>
                                    <option value="Velocidade de Movimento">Velocidade de Movimento</option>
                                    <option value="Tempo de Recarga">Tempo de Recarga</option>
                                </optgroup>
                                <optgroup label="‚ú® ESPECIAL">
                                    <option value="Sorte">Sorte</option>
                                    <option value="Drop de Ouro">Drop de Ouro</option>
                                    <option value="Experi√™ncia">Experi√™ncia</option>
                                    <option value="Durabilidade">Durabilidade</option>
                                </optgroup>
                            </select>
                            <input type="number" placeholder="Valor" class="attr-value">
                        </div>
                    </div>
                    <button class="btn-add-attr" onclick="addAttribute('item1')">+ Adicionar Atributo</button>
                </div>
                <div class="input-group">
                    <label>Efeitos Especiais (opcional)</label>
                    <div id="item1-effects">
                        <div class="attr-input">
                            <select class="effect-name" style="flex: 2;">
                                <option value="">Selecione o efeito</option>
                                <optgroup label="üî• FOGO">
                                    <option value="Queima inimigos">Queima inimigos</option>
                                    <option value="Explos√£o flamejante">Explos√£o flamejante</option>
                                    <option value="Aura de fogo">Aura de fogo</option>
                                    <option value="Incendeia √°rea">Incendeia √°rea</option>
                                </optgroup>
                                <optgroup label="‚ùÑÔ∏è GELO">
                                    <option value="Congela inimigos">Congela inimigos</option>
                                    <option value="Desacelera alvos">Desacelera alvos</option>
                                    <option value="Tempestade de gelo">Tempestade de gelo</option>
                                    <option value="Aura g√©lida">Aura g√©lida</option>
                                </optgroup>
                                <optgroup label="‚ö° RAIO">
                                    <option value="Paralisa inimigos">Paralisa inimigos</option>
                                    <option value="Corrente el√©trica">Corrente el√©trica</option>
                                    <option value="Sobrecarga">Sobrecarga</option>
                                    <option value="Tempestade">Tempestade</option>
                                </optgroup>
                                <optgroup label="‚ò†Ô∏è VENENO">
                                    <option value="Envenena alvos">Envenena alvos</option>
                                    <option value="Nuvem t√≥xica">Nuvem t√≥xica</option>
                                    <option value="Corros√£o">Corros√£o</option>
                                    <option value="Doen√ßa">Doen√ßa</option>
                                </optgroup>
                                <optgroup label="üíö CURA">
                                    <option value="Regenera vida">Regenera vida</option>
                                    <option value="Cura ao atacar">Cura ao atacar</option>
                                    <option value="Aura de cura">Aura de cura</option>
                                    <option value="Restaura√ß√£o">Restaura√ß√£o</option>
                                </optgroup>
                                <optgroup label="ü©∏ VAMP√çRICO">
                                    <option value="Drena vida">Drena vida</option>
                                    <option value="Roubo vamp√≠rico">Roubo vamp√≠rico</option>
                                    <option value="Absor√ß√£o de alma">Absor√ß√£o de alma</option>
                                </optgroup>
                                <optgroup label="‚ú® LUZ">
                                    <option value="Dano sagrado">Dano sagrado</option>
                                    <option value="Cega inimigos">Cega inimigos</option>
                                    <option value="Aura divina">Aura divina</option>
                                    <option value="Purifica√ß√£o">Purifica√ß√£o</option>
                                </optgroup>
                                <optgroup label="üåë TREVAS">
                                    <option value="Dano sombrio">Dano sombrio</option>
                                    <option value="Amaldi√ßoa alvos">Amaldi√ßoa alvos</option>
                                    <option value="Medo">Medo</option>
                                    <option value="Corrup√ß√£o">Corrup√ß√£o</option>
                                </optgroup>
                                <optgroup label="üí• F√çSICO">
                                    <option value="Atordoa inimigos">Atordoa inimigos</option>
                                    <option value="Sangramento">Sangramento</option>
                                    <option value="Perfura√ß√£o">Perfura√ß√£o</option>
                                    <option value="Esmagamento">Esmagamento</option>
                                </optgroup>
                                <optgroup label="üõ°Ô∏è PROTE√á√ÉO">
                                    <option value="Escudo m√°gico">Escudo m√°gico</option>
                                    <option value="Reflete dano">Reflete dano</option>
                                    <option value="Imunidade">Imunidade</option>
                                    <option value="Barreira">Barreira</option>
                                </optgroup>
                                <optgroup label="üí® MOVIMENTO">
                                    <option value="Aumenta velocidade">Aumenta velocidade</option>
                                    <option value="Teleporte">Teleporte</option>
                                    <option value="Dash">Dash</option>
                                    <option value="Levita√ß√£o">Levita√ß√£o</option>
                                </optgroup>
                                <optgroup label="üîÆ M√ÅGICO">
                                    <option value="Regenera mana">Regenera mana</option>
                                    <option value="Amplifica magia">Amplifica magia</option>
                                    <option value="Silencia inimigos">Silencia inimigos</option>
                                    <option value="Explos√£o arcana">Explos√£o arcana</option>
                                </optgroup>
                                <optgroup label="üéØ UTILIT√ÅRIO">
                                    <option value="Aumenta drop">Aumenta drop</option>
                                    <option value="Dobra XP">Dobra XP</option>
                                    <option value="Invisibilidade">Invisibilidade</option>
                                    <option value="Vis√£o noturna">Vis√£o noturna</option>
                                </optgroup>
                                <optgroup label="üåü ESPECIAL">
                                    <option value="Invoca√ß√£o">Invoca√ß√£o</option>
                                    <option value="Transforma√ß√£o">Transforma√ß√£o</option>
                                    <option value="Ressurrei√ß√£o">Ressurrei√ß√£o</option>
                                    <option value="Controle mental">Controle mental</option>
                                </optgroup>
                            </select>
                            <input type="number" placeholder="N√≠vel" class="effect-level" min="1" max="10" value="1">
                        </div>
                    </div>
                    <button class="btn-add-attr" onclick="addEffect('item1')">+ Adicionar Efeito</button>
                </div>
            </div>

            <div class="item-card">
                <h2>üó°Ô∏è Item 2</h2>
                <div class="input-group">
                    <label>Nome do Item</label>
                    <input type="text" id="item2-name" placeholder="Ex: Espada de Fogo">
                </div>
                <div class="input-group">
                    <label>Tipo</label>
                    <select id="item2-type">
                        <option value="espada">Espada</option>
                        <option value="machado">Machado</option>
                        <option value="lan√ßa">Lan√ßa</option>
                        <option value="capa">Capa</option>
                        <option value="peitoral">Peitoral</option>                      
                        <option value="arco">Arco</option>
                        <option value="brinco">Brinco</option>
                        <option value="cajado">Cajado</option>
                        <option value="varinha">Varinha</option>
                        <option value="pulseira">Pulseira</option>
                        <option value="gargantilha">Gargantilha</option>
                        <option value="martelo">Martelo</option>
                        <option value="adaga">Adaga</option>
                        <option value="cal√ßa">Cal√ßa</option>
                        <option value="escudo">Escudo</option>
                        <option value="capacete">Capacete</option>
                        <option value="botas">Botas</option>
                        <option value="luvas">Luvas</option>
                        <option value="anel">Anel</option>
                        <option value="amuleto">Amuleto</option>
                        <option value="colar">Colar</option>
                    </select>
                </div>
                <div class="input-group material-search">
                    <label>Material (digite para buscar)</label>
                    <input type="text" id="item2-material" placeholder="Ex: ouro, √°gua, obsidiana..." autocomplete="off">
                    <div class="material-suggestions" id="item2-suggestions"></div>
                </div>
                <div class="input-group">
                    <label>Atributos</label>
                    <div id="item2-attributes">
                        <div class="attr-input">
                            <select class="attr-name">
                                <option value="">Selecione o atributo</option>
                                <optgroup label="‚öîÔ∏è COMBATE">
                                    <option value="Dano">Dano</option>
                                    <option value="Dano F√≠sico">Dano F√≠sico</option>
                                    <option value="Dano M√°gico">Dano M√°gico</option>
                                    <option value="Dano Cr√≠tico">Dano Cr√≠tico</option>
                                    <option value="Taxa de Cr√≠tico">Taxa de Cr√≠tico</option>
                                    <option value="Penetra√ß√£o de Armadura">Penetra√ß√£o de Armadura</option>
                                    <option value="Precis√£o">Precis√£o</option>
                                    <option value="Alcance">Alcance</option>
                                </optgroup>
                                <optgroup label="üõ°Ô∏è DEFESA">
                                    <option value="Defesa">Defesa</option>
                                    <option value="Defesa F√≠sica">Defesa F√≠sica</option>
                                    <option value="Defesa M√°gica">Defesa M√°gica</option>
                                    <option value="Resist√™ncia">Resist√™ncia</option>
                                    <option value="Bloqueio">Bloqueio</option>
                                    <option value="Evas√£o">Evas√£o</option>
                                    <option value="Redu√ß√£o de Dano">Redu√ß√£o de Dano</option>
                                </optgroup>
                                <optgroup label="‚ù§Ô∏è VITALIDADE">
                                    <option value="Vida">Vida</option>
                                    <option value="HP M√°ximo">HP M√°ximo</option>
                                    <option value="Regenera√ß√£o de Vida">Regenera√ß√£o de Vida</option>
                                    <option value="Roubo de Vida">Roubo de Vida</option>
                                </optgroup>
                                <optgroup label="üîÆ ENERGIA">
                                    <option value="Mana">Mana</option>
                                    <option value="Mana M√°xima">Mana M√°xima</option>
                                    <option value="Regenera√ß√£o de Mana">Regenera√ß√£o de Mana</option>
                                    <option value="Custo de Habilidade">Custo de Habilidade</option>
                                </optgroup>
                                <optgroup label="‚ö° VELOCIDADE">
                                    <option value="Velocidade de Ataque">Velocidade de Ataque</option>
                                    <option value="Velocidade de Movimento">Velocidade de Movimento</option>
                                    <option value="Tempo de Recarga">Tempo de Recarga</option>
                                </optgroup>
                                <optgroup label="‚ú® ESPECIAL">
                                    <option value="Sorte">Sorte</option>
                                    <option value="Drop de Ouro">Drop de Ouro</option>
                                    <option value="Experi√™ncia">Experi√™ncia</option>
                                    <option value="Durabilidade">Durabilidade</option>
                                </optgroup>
                            </select>
                            <input type="number" placeholder="Valor" class="attr-value">
                        </div>
                    </div>
                    <button class="btn-add-attr" onclick="addAttribute('item2')">+ Adicionar Atributo</button>
                </div>
                <div class="input-group">
                    <label>Efeitos Especiais (opcional)</label>
                    <div id="item2-effects">
                        <div class="attr-input">
                            <select class="effect-name" style="flex: 2;">
                                <option value="">Selecione o efeito</option>
                                <optgroup label="üî• FOGO">
                                    <option value="Queima inimigos">Queima inimigos</option>
                                    <option value="Explos√£o flamejante">Explos√£o flamejante</option>
                                    <option value="Aura de fogo">Aura de fogo</option>
                                    <option value="Incendeia √°rea">Incendeia √°rea</option>
                                </optgroup>
                                <optgroup label="‚ùÑÔ∏è GELO">
                                    <option value="Congela inimigos">Congela inimigos</option>
                                    <option value="Desacelera alvos">Desacelera alvos</option>
                                    <option value="Tempestade de gelo">Tempestade de gelo</option>
                                    <option value="Aura g√©lida">Aura g√©lida</option>
                                </optgroup>
                                <optgroup label="‚ö° RAIO">
                                    <option value="Paralisa inimigos">Paralisa inimigos</option>
                                    <option value="Corrente el√©trica">Corrente el√©trica</option>
                                    <option value="Sobrecarga">Sobrecarga</option>
                                    <option value="Tempestade">Tempestade</option>
                                </optgroup>
                                <optgroup label="‚ò†Ô∏è VENENO">
                                    <option value="Envenena alvos">Envenena alvos</option>
                                    <option value="Nuvem t√≥xica">Nuvem t√≥xica</option>
                                    <option value="Corros√£o">Corros√£o</option>
                                    <option value="Doen√ßa">Doen√ßa</option>
                                </optgroup>
                                <optgroup label="üíö CURA">
                                    <option value="Regenera vida">Regenera vida</option>
                                    <option value="Cura ao atacar">Cura ao atacar</option>
                                    <option value="Aura de cura">Aura de cura</option>
                                    <option value="Restaura√ß√£o">Restaura√ß√£o</option>
                                </optgroup>
                                <optgroup label="ü©∏ VAMP√çRICO">
                                    <option value="Drena vida">Drena vida</option>
                                    <option value="Roubo vamp√≠rico">Roubo vamp√≠rico</option>
                                    <option value="Absor√ß√£o de alma">Absor√ß√£o de alma</option>
                                </optgroup>
                                <optgroup label="‚ú® LUZ">
                                    <option value="Dano sagrado">Dano sagrado</option>
                                    <option value="Cega inimigos">Cega inimigos</option>
                                    <option value="Aura divina">Aura divina</option>
                                    <option value="Purifica√ß√£o">Purifica√ß√£o</option>
                                </optgroup>
                                <optgroup label="üåë TREVAS">
                                    <option value="Dano sombrio">Dano sombrio</option>
                                    <option value="Amaldi√ßoa alvos">Amaldi√ßoa alvos</option>
                                    <option value="Medo">Medo</option>
                                    <option value="Corrup√ß√£o">Corrup√ß√£o</option>
                                </optgroup>
                                <optgroup label="üí• F√çSICO">
                                    <option value="Atordoa inimigos">Atordoa inimigos</option>
                                    <option value="Sangramento">Sangramento</option>
                                    <option value="Perfura√ß√£o">Perfura√ß√£o</option>
                                    <option value="Esmagamento">Esmagamento</option>
                                </optgroup>
                                <optgroup label="üõ°Ô∏è PROTE√á√ÉO">
                                    <option value="Escudo m√°gico">Escudo m√°gico</option>
                                    <option value="Reflete dano">Reflete dano</option>
                                    <option value="Imunidade">Imunidade</option>
                                    <option value="Barreira">Barreira</option>
                                </optgroup>
                                <optgroup label="üí® MOVIMENTO">
                                    <option value="Aumenta velocidade">Aumenta velocidade</option>
                                    <option value="Teleporte">Teleporte</option>
                                    <option value="Dash">Dash</option>
                                    <option value="Levita√ß√£o">Levita√ß√£o</option>
                                </optgroup>
                                <optgroup label="üîÆ M√ÅGICO">
                                    <option value="Regenera mana">Regenera mana</option>
                                    <option value="Amplifica magia">Amplifica magia</option>
                                    <option value="Silencia inimigos">Silencia inimigos</option>
                                    <option value="Explos√£o arcana">Explos√£o arcana</option>
                                </optgroup>
                                <optgroup label="üéØ UTILIT√ÅRIO">
                                    <option value="Aumenta drop">Aumenta drop</option>
                                    <option value="Dobra XP">Dobra XP</option>
                                    <option value="Invisibilidade">Invisibilidade</option>
                                    <option value="Vis√£o noturna">Vis√£o noturna</option>
                                </optgroup>
                                <optgroup label="üåü ESPECIAL">
                                    <option value="Invoca√ß√£o">Invoca√ß√£o</option>
                                    <option value="Transforma√ß√£o">Transforma√ß√£o</option>
                                    <option value="Ressurrei√ß√£o">Ressurrei√ß√£o</option>
                                    <option value="Controle mental">Controle mental</option>
                                </optgroup>
                            </select>
                            <input type="number" placeholder="N√≠vel" class="effect-level" min="1" max="10" value="1">
                        </div>
                    </div>
                    <button class="btn-add-attr" onclick="addEffect('item2')">+ Adicionar Efeito</button>
                </div>
            </div>

            <!-- Item 3 (Opcional) -->
            <div class="item-card">
                <h2>‚ú® Item 3 (Opcional)</h2>
                <div class="input-group">
                    <label>Nome do Item</label>
                    <input type="text" id="item3-name" placeholder="Ex: Elmo de Prata">
                </div>
                <div class="input-group">
                    <label>Tipo</label>
                    <select id="item3-type">
                        <option value="espada">Espada</option>
                        <option value="machado">Machado</option>
                        <option value="lan√ßa">Lan√ßa</option>
                        <option value="capa">Capa</option>
                        <option value="peitoral">Peitoral</option>                      
                        <option value="arco">Arco</option>
                        <option value="brinco">Brinco</option>
                        <option value="cajado">Cajado</option>
                        <option value="varinha">Varinha</option>
                        <option value="pulseira">Pulseira</option>
                        <option value="gargantilha">Gargantilha</option>
                        <option value="martelo">Martelo</option>
                        <option value="adaga">Adaga</option>
                        <option value="cal√ßa">Cal√ßa</option>
                        <option value="escudo">Escudo</option>
                        <option value="capacete">Capacete</option>
                        <option value="botas">Botas</option>
                        <option value="luvas">Luvas</option>
                        <option value="anel">Anel</option>
                        <option value="amuleto">Amuleto</option>
                        <option value="colar">Colar</option>
                    </select>
                </div>
                <div class="input-group material-search">
                    <label>Material (digite para buscar)</label>
                    <input type="text" id="item3-material" placeholder="Digite o material..." autocomplete="off">
                    <div class="material-suggestions" id="item3-suggestions"></div>
                </div>
                <div class="input-group">
                    <label>Atributos</label>
                    <div id="item3-attributes"></div>
                    <button class="btn-add-attr" onclick="addAttribute('item3')">+ Adicionar Atributo</button>
                </div>
                <div class="input-group">
                    <label>Efeitos Especiais (opcional)</label>
                    <div id="item3-effects"></div>
                    <button class="btn-add-attr" onclick="addEffect('item3')">+ Adicionar Efeito</button>
                </div>
            </div>

            <!-- Item 4 (Opcional) -->
            <div class="item-card">
                <h2>üåë Item 4 (Opcional)</h2>
                <div class="input-group">
                    <label>Nome do Item</label>
                    <input type="text" id="item4-name" placeholder="Ex: Capa de Sombras">
                </div>
                <div class="input-group">
                    <label>Tipo</label>
                    <select id="item4-type">
                        <option value="espada">Espada</option>
                        <option value="machado">Machado</option>
                        <option value="lan√ßa">Lan√ßa</option>
                        <option value="capa">Capa</option>
                        <option value="peitoral">Peitoral</option>                      
                        <option value="arco">Arco</option>
                        <option value="brinco">Brinco</option>
                        <option value="cajado">Cajado</option>
                        <option value="varinha">Varinha</option>
                        <option value="pulseira">Pulseira</option>
                        <option value="gargantilha">Gargantilha</option>
                        <option value="martelo">Martelo</option>
                        <option value="adaga">Adaga</option>
                        <option value="cal√ßa">Cal√ßa</option>
                        <option value="escudo">Escudo</option>
                        <option value="capacete">Capacete</option>
                        <option value="botas">Botas</option>
                        <option value="luvas">Luvas</option>
                        <option value="anel">Anel</option>
                        <option value="amuleto">Amuleto</option>
                        <option value="colar">Colar</option>
                    </select>
                </div>
                <div class="input-group material-search">
                    <label>Material (digite para buscar)</label>
                    <input type="text" id="item4-material" placeholder="Digite o material..." autocomplete="off">
                    <div class="material-suggestions" id="item4-suggestions"></div>
                </div>
                <div class="input-group">
                    <label>Atributos</label>
                    <div id="item4-attributes"></div>
                    <button class="btn-add-attr" onclick="addAttribute('item4')">+ Adicionar Atributo</button>
                </div>
                <div class="input-group">
                    <label>Efeitos Especiais (opcional)</label>
                    <div id="item4-effects"></div>
                    <button class="btn-add-attr" onclick="addEffect('item4')">+ Adicionar Efeito</button>
                </div>
            </div>

            <button class="fusion-button" onclick="fuseItems()">
                ‚ö° FUNDIR ITENS ‚ö°
            </button>
        </div>

        <div class="result-container" id="result">
            <div id="result-content"></div>
        </div>
    </div>

    <script>
        // Base de dados COMPLETA de materiais
const MATERIALS_DATABASE = {
            // METAIS COMUNS
            'metais_comuns': ['ferro', 'a√ßo', 'bronze', 'cobre', 'lat√£o', 'estanho', 'chumbo', 'zinco', 'n√≠quel'],
            
            // METAIS PRECIOSOS
            'metais_preciosos': ['ouro', 'prata', 'platina', 'pal√°dio', 'r√≥dio', 'ir√≠dio', 'osmio', 'rut√™nio'],
            
            // METAIS RAROS/FANTASY/FIC√á√ÉO
            'metais_fantasy': ['mitril', 'mithril', 'adamantita', 'adamantium', 'vibranium', 'uru', 'unobtainium', 'orichalcum', 'etherium', 'mithral', 'celestial', 'darksteel'],
            
            // CRISTAIS E GEMAS
            'cristais': ['diamante', 'rubi', 'safira', 'esmeralda', 'ametista', 'top√°zio', 'quartzo', 'jade', '√¥nix', 'opala', 'turquesa', 'cristal', 'mana cristalizada', 'cristal do caos', 'kriptonita', 'cristal elemental', 'cristal negro', 'cristal carmesim'],
            
            // PEDRAS E MINERAIS
            'pedras': ['obsidiana', 'obsidiana negra', 'm√°rmore', 'granito', 'ard√≥sia', 'basalto', 'pedra lunar', 'pedra solar', 'pedra das estrelas'],
            
            // ELEMENTOS - FOGO
            'elemento_fogo': ['fogo', 'lava', 'magma', 'plasma condensado', 'cinzas', 'brasa', 'chama', 'inferno', 'plasma'],
            
            // ELEMENTOS - √ÅGUA
            'elemento_agua': ['√°gua', 'gelo', 'neve', 'vapor', 'neblina', 'orvalho', '√°gua marinha', '√°gua benta'],
            
            // ELEMENTOS - TERRA
            'elemento_terra': ['terra', 'areia', 'barro', 'lama', 'rochas', 'argila', 'p√≥'],
            
            // ELEMENTOS - AR
            'elemento_ar': ['ar', 'vento', 'tempestade', 'tornado', 'brisa', 'furac√£o', 'n√©voa'],
            
            // ELEMENTOS - REL√ÇMPAGO
            'elemento_raio': ['rel√¢mpago', 'raio', 'trov√£o', 'eletricidade', 'energia el√©trica', 'descarga', 'energon'],
            
            // ELEMENTOS - LUZ/TREVAS/VAZIO
            'luz_trevas': ['luz', 'trevas', 'sombra', 'penumbra', 'escurid√£o', 'radi√¢ncia', 'brilho celestial', 'void', 'abismo', 'mat√©ria abissal', 'ess√™ncia das sombras', 'fragmento do vazio'],
            
            // MADEIRAS
            'madeiras': ['madeira', 'carvalho', 'mogno', '√©bano', 'pinheiro', 'bambu', 'cerejeira', 'salgueiro', 'teixo', 'madeira anci√£', 'madeira sagrada'],
            
            // ORG√ÇNICOS
            'organicos': ['osso', 'osso amaldi√ßoado', 'carne mutante', 'cora√ß√£o de drag√£o', 'cora√ß√£o estelar', 'ess√™ncia de slime', 'couro', 'escamas', 'pele', 'chifre', 'marfim', 'penas', 'quitina', 'coral', '√¢mbar'],
            
            // M√ÅGICOS/M√çSTICOS
            'magicos': ['pedra filosofal', 'mana', 'ess√™ncia arcana', 'chakra s√≥lido', 'ki cristalizado', 'alma condensada', 'sangue antigo', '√©ter', 'arcano', 'divino', 'demon√≠aco', 'celestial', 'astral', 'espectral', 'et√©reo', 'primordial', 'runas', 'sangue de drag√£o'],
            
            // TECNOL√ìGICOS/QU√ÇNTICOS
            'tecnologicos': ['nanotubos', 'carbono', 'grafeno', 'pol√≠mero', 'tit√¢nio', 'tungst√™nio', 'alum√≠nio', 'sil√≠cio', 'liga met√°lica', 'nanomaterial', 'liga qu√¢ntica', 'circuito vivo', 'metal inteligente', 'cristal de dados', 'n√∫cleo sint√©tico', 'n√∫cleo de energia pura'],
            
            // NATURAIS ESPECIAIS
            'naturais_especiais': ['cristal de sal', 'enxofre', 'obsidiana vulc√¢nica', '√¢mbar fossilizado', 'p√©rola negra', 'marfim de mamute'],
            
            // EX√ìTICOS/C√ìSMICOS
            'exoticos': ['meteoro', 'fragmento estelar', 'poeira c√≥smica', 'ess√™ncia lunar', 'n√∫cleo solar', 'fragmento dimensional', 'energia do caos', 'mat√©ria negra', 'tesseract', 'elemento x', 'mat√©ria vermelha', 'anti-mat√©ria', 'n√∫cleo de nether', 'fragmento do end', 'ess√™ncia do tempo', 'mat√©ria inst√°vel']
        };

        // Achata todos os materiais em um array √∫nico
        const ALL_MATERIALS = Object.values(MATERIALS_DATABASE).flat();

        // IA de Fus√£o de Itens MELHORADA
        class ItemFusionAI {
            constructor() {
                this.materialsDB = MATERIALS_DATABASE;
                this.allMaterials = ALL_MATERIALS;
                this.nomesGerados = new Set(); // Armazena nomes j√° criados
            }

            canFuse(item1, item2) {
                // AGORA ACEITA QUALQUER COMBINA√á√ÉO!
                // S√≥ precisa que ambos tenham tipo definido
                return item1.type && item2.type;
            }

            getMaterialCategory(material) {
                const mat = material.toLowerCase();
                for (const [category, materials] of Object.entries(this.materialsDB)) {
                    if (materials.includes(mat)) {
                        return category;
                    }
                }
                return 'custom';
            }

            generateFusedName(item1, item2) {
                const tipo = item1.type;
                const mat1 = item1.material;
                const mat2 = item2.material;
                
                // Detecta se s√£o do mesmo tipo
                const mesmoTipo = item1.type.toLowerCase() === item2.type.toLowerCase();
                
                let nomeBase = '';
                
                if (!mesmoTipo) {
                    nomeBase = `${tipo} H√≠brido de ${mat1} e ${mat2}`;
                } else if (mat1.toLowerCase() === mat2.toLowerCase()) {
                    // Mesmo material
                    nomeBase = `${tipo} de ${mat1} Forjado Duplo`;
                } else {
                    // Materiais diferentes - cria combina√ß√µes criativas
                    const cat1 = this.getMaterialCategory(mat1);
                    const cat2 = this.getMaterialCategory(mat2);
                    
                    // Combina√ß√µes elementais
                    if (cat1.includes('elemento') && cat2.includes('elemento')) {
                        nomeBase = `${tipo} Elemental de ${mat1} e ${mat2}`;
                    }
                    // Metal + Elemento
                    else if ((cat1.includes('metais') && cat2.includes('elemento')) || 
                        (cat2.includes('metais') && cat1.includes('elemento'))) {
                        const metal = cat1.includes('metais') ? mat1 : mat2;
                        const elemento = cat1.includes('elemento') ? mat1 : mat2;
                        nomeBase = `${tipo} de ${metal} Imbu√≠do de ${elemento}`;
                    }
                    // Cristal + qualquer coisa
                    else if (cat1 === 'cristais' || cat2 === 'cristais') {
                        const cristal = cat1 === 'cristais' ? mat1 : mat2;
                        const outro = cat1 === 'cristais' ? mat2 : mat1;
                        nomeBase = `${tipo} de ${outro} com N√∫cleo de ${cristal}`;
                    }
                    // Combina√ß√£o padr√£o
                    else {
                        nomeBase = `${tipo} de ${mat1} Revestido em ${mat2}`;
                    }
                }
                
                // Verifica se o nome j√° existe
                let nomeFinal = nomeBase;
                let contador = 1;
                
                while (this.nomesGerados.has(nomeFinal.toLowerCase())) {
                    // Adiciona sufixo √∫nico baseado no contador
                    const sufixos = [
                        'Supremo', 'Superior', 'Refinado', 'Aperfei√ßoado', 'Melhorado',
                        'Ancestral', 'Lend√°rio', 'M√≠stico', 'Primordial', 'Transcendente',
                        'Divino', 'Celestial', 'Eterno', 'Imortal', 'Glorioso',
                        'Radiante', 'Resplandecente', 'Magnificente', 'Exaltado', 'Sublime'
                    ];
                    
                    if (contador <= sufixos.length) {
                        nomeFinal = `${nomeBase} ${sufixos[contador - 1]}`;
                    } else {
                        // Se acabarem os sufixos, adiciona n√∫mero romano
                        nomeFinal = `${nomeBase} ${this.toRoman(contador - sufixos.length)}`;
                    }
                    contador++;
                }
                
                // Registra o nome como usado
                this.nomesGerados.add(nomeFinal.toLowerCase());
                
                return nomeFinal;
            }

            toRoman(num) {
                // Converte n√∫meros para romanos (at√© 50)
                const romans = {
                    50: 'L', 40: 'XL', 10: 'X', 9: 'IX', 
                    5: 'V', 4: 'IV', 1: 'I'
                };
                let result = '';
                for (let value in romans) {
                    while (num >= value) {
                        result += romans[value];
                        num -= value;
                    }
                }
                return result;
            }

            fuseAttributes(item1, item2) {
                const fusedAttrs = {};
                
                // Soma atributos comuns
                [...item1.attributes, ...item2.attributes].forEach(attr => {
                    if (fusedAttrs[attr.name]) {
                        fusedAttrs[attr.name] += attr.value;
                    } else {
                        fusedAttrs[attr.name] = attr.value;
                    }
                });
                
                // B√¥nus por sinergia de materiais
                const bonus = this.calculateMaterialSynergy(item1.material, item2.material);
                
                return Object.entries(fusedAttrs).map(([name, value]) => ({
                    name,
                    value: Math.floor(value * bonus)
                }));
            }

            fuseEffects(item1, item2) {
                const fusedEffects = {};
                
                // Processa efeitos do item 1
                item1.customEffects.forEach(eff => {
                    const key = eff.name.toLowerCase().trim();
                    if (fusedEffects[key]) {
                        fusedEffects[key].level += eff.level;
                        fusedEffects[key].name = eff.name; // Mant√©m o nome original
                    } else {
                        fusedEffects[key] = { name: eff.name, level: eff.level };
                    }
                });
                
                // Processa efeitos do item 2
                item2.customEffects.forEach(eff => {
                    const key = eff.name.toLowerCase().trim();
                    if (fusedEffects[key]) {
                        // Efeito igual = soma n√≠veis com b√¥nus
                        fusedEffects[key].level += eff.level;
                        fusedEffects[key].name = `${eff.name} Aprimorado`;
                    } else {
                        fusedEffects[key] = { name: eff.name, level: eff.level };
                    }
                });
                
                // Converte para array e formata
                return Object.values(fusedEffects).map(eff => {
                    let emoji = '‚ú®';
                    const nameLower = eff.name.toLowerCase();
                    
                    // Escolhe emoji baseado no nome do efeito
                    if (nameLower.includes('fogo') || nameLower.includes('queima') || nameLower.includes('incendeia')) emoji = 'üî•';
                    else if (nameLower.includes('gelo') || nameLower.includes('congela')) emoji = '‚ùÑÔ∏è';
                    else if (nameLower.includes('veneno') || nameLower.includes('toxico')) emoji = '‚ò†Ô∏è';
                    else if (nameLower.includes('vida') || nameLower.includes('cura') || nameLower.includes('regenera')) emoji = 'üíö';
                    else if (nameLower.includes('raio') || nameLower.includes('eletric') || nameLower.includes('paralisa')) emoji = '‚ö°';
                    else if (nameLower.includes('vampir') || nameLower.includes('drena')) emoji = 'ü©∏';
                    else if (nameLower.includes('explos') || nameLower.includes('area')) emoji = 'üí•';
                    else if (nameLower.includes('veloz') || nameLower.includes('rapido')) emoji = 'üí®';
                    else if (nameLower.includes('escudo') || nameLower.includes('proteg')) emoji = 'üõ°Ô∏è';
                    else if (nameLower.includes('critico')) emoji = 'üí•';
                    else if (nameLower.includes('mana') || nameLower.includes('energia')) emoji = 'üîÆ';
                    
                    return {
                        text: `${emoji} ${eff.name} (N√≠vel ${eff.level})`,
                        level: eff.level
                    };
                });
            }

            calculateMaterialSynergy(mat1, mat2) {
                const cat1 = this.getMaterialCategory(mat1);
                const cat2 = this.getMaterialCategory(mat2);
                
                // Sinergia perfeita (mesmo material)
                if (mat1.toLowerCase() === mat2.toLowerCase()) return 1.5;
                
                // Sinergias especiais
                const synergies = {
                    'elemento_fogo,metais_comuns': 1.3, // Fogo forja metal
                    'elemento_agua,cristais': 1.3,      // √Ågua purifica cristal
                    'luz_trevas,magicos': 1.4,          // Luz/Trevas potencializa magia
                    'elemento_raio,tecnologicos': 1.4,  // Raio + tech = supercharged
                };
                
                const key1 = `${cat1},${cat2}`;
                const key2 = `${cat2},${cat1}`;
                
                return synergies[key1] || synergies[key2] || 1.2; // B√¥nus padr√£o
            }

            calculateRarity(totalStats) {
                if (totalStats < 20) return 'comum';
                if (totalStats < 50) return 'incomum';
                if (totalStats < 100) return 'raro';
                if (totalStats < 200) return 'epico';
                if (totalStats < 400) return 'lendario';
                return 'mitico';
            }

            generateEffects(fusedItem, mat1, mat2, customEffects) {
                const effects = [];
                
                // PRIMEIRO: Adiciona efeitos customizados dos itens originais
                customEffects.forEach(eff => {
                    effects.push(eff.text);
                });
                
                // DEPOIS: Adiciona efeitos autom√°ticos por material (se n√£o conflitar)
                const cat1 = this.getMaterialCategory(mat1);
                const cat2 = this.getMaterialCategory(mat2);
                
                const materialEffects = {
                    'elemento_fogo': 'üî• Causa dano de fogo adicional',
                    'elemento_agua': 'üíß Regenera vida lentamente',
                    'elemento_raio': '‚ö° Chance de paralisar inimigos',
                    'elemento_terra': 'üóø Aumenta resist√™ncia',
                    'elemento_ar': 'üí® Aumenta velocidade de ataque',
                    'luz_trevas': '‚ú® Drena vida dos inimigos',
                    'cristais': 'üíé Reflete dano m√°gico',
                    'metais_preciosos': 'üëë Aumenta drop de ouro',
                    'magicos': 'üîÆ Regenera mana',
                };
                
                if (materialEffects[cat1]) effects.push(materialEffects[cat1]);
                if (materialEffects[cat2] && cat1 !== cat2) effects.push(materialEffects[cat2]);
                
                // Efeitos baseados em atributos (somente se n√£o houver efeitos customizados relacionados)
                const hasCustomCritical = customEffects.some(e => e.text.toLowerCase().includes('cr√≠tico'));
                const hasCustomDefense = customEffects.some(e => e.text.toLowerCase().includes('defesa') || e.text.toLowerCase().includes('armadura'));
                
                fusedItem.attributes.forEach(attr => {
                    if (attr.name.toLowerCase().includes('dano') && attr.value > 30 && !hasCustomCritical) {
                        effects.push(`üí• Golpe Cr√≠tico: +${Math.floor(attr.value / 10)}% de chance`);
                    }
                    if (attr.name.toLowerCase().includes('defesa') && attr.value > 30 && !hasCustomDefense) {
                        effects.push(`üõ°Ô∏è Armadura Pesada: Reduz ${Math.floor(attr.value / 5)}% do dano`);
                    }
                });
                
                // Efeitos por raridade (somente se n√£o tiver muitos efeitos customizados)
                if (customEffects.length < 3) {
                    const totalStats = fusedItem.totalStats;
                    if (totalStats > 100) effects.push('‚ú® Aura de Poder (intimida inimigos)');
                    if (totalStats > 200) effects.push('‚ö° Libera√ß√£o de Energia (dano em √°rea)');
                    if (totalStats > 300) effects.push('üåü Resson√¢ncia Divina (aumenta XP ganho)');
                }
                
                // Remove duplicatas
                return [...new Set(effects)];
            }

            fuse(item1, item2) {
                if (!this.canFuse(item1, item2)) {
                    return {
                        success: false,
                        message: '‚ùå Itens incompat√≠veis! Verifique os dados.'
                    };
                }

                const fusedName = this.generateFusedName(item1, item2);
                const fusedAttributes = this.fuseAttributes(item1, item2);
                const totalStats = fusedAttributes.reduce((sum, attr) => sum + attr.value, 0);
                const rarity = this.calculateRarity(totalStats);
                
                // Funde os efeitos customizados
                const customEffects = this.fuseEffects(item1, item2);
                
                const fusedItem = {
                    name: fusedName,
                    type: item1.type,
                    materials: [item1.material, item2.material],
                    attributes: fusedAttributes,
                    rarity: rarity,
                    totalStats: totalStats
                };
                
                // Gera efeitos (customizados + autom√°ticos)
                fusedItem.effects = this.generateEffects(fusedItem, item1.material, item2.material, customEffects);

                return {
                    success: true,
                    item: fusedItem
                };
            }
        }

        // Inst√¢ncia da IA
        const fusionAI = new ItemFusionAI();

        // Sistema de busca de materiais
        function setupMaterialSearch(itemId) {
            const input = document.getElementById(`${itemId}-material`);
            const suggestionsDiv = document.getElementById(`${itemId}-suggestions`);
            
            input.addEventListener('input', (e) => {
                const query = e.target.value.toLowerCase();
                
                if (query.length < 2) {
                    suggestionsDiv.classList.remove('show');
                    return;
                }
                
                const matches = ALL_MATERIALS.filter(m => m.includes(query)).slice(0, 10);
                
                if (matches.length === 0) {
                    suggestionsDiv.innerHTML = '<div class="material-suggestion-item">Nenhum material encontrado. Digite qualquer material!</div>';
                    suggestionsDiv.classList.add('show');
                    return;
                }
                
                suggestionsDiv.innerHTML = matches.map(material => {
                    const category = fusionAI.getMaterialCategory(material);
                    const categoryName = category.replace(/_/g, ' ').toUpperCase();
                    return `
                        <div class="material-suggestion-item" onclick="selectMaterial('${itemId}', '${material}')">
                            <div><strong>${material}</strong></div>
                            <div class="material-category">${categoryName}</div>
                        </div>
                    `;
                }).join('');
                
                suggestionsDiv.classList.add('show');
            });
            
            input.addEventListener('blur', () => {
                setTimeout(() => suggestionsDiv.classList.remove('show'), 200);
            });
        }

        function selectMaterial(itemId, material) {
            document.getElementById(`${itemId}-material`).value = material;
            document.getElementById(`${itemId}-suggestions`).classList.remove('show');
        }

        function addAttribute(itemId) {
            const container = document.getElementById(`${itemId}-attributes`);
            const newAttr = document.createElement('div');
            newAttr.className = 'attr-input';
            newAttr.innerHTML = `
                <select class="attr-name">
                    <option value="">Selecione o atributo</option>
                    <optgroup label="‚öîÔ∏è COMBATE">
                        <option value="Dano">Dano</option>
                        <option value="Dano F√≠sico">Dano F√≠sico</option>
                        <option value="Dano M√°gico">Dano M√°gico</option>
                        <option value="Dano Cr√≠tico">Dano Cr√≠tico</option>
                        <option value="Taxa de Cr√≠tico">Taxa de Cr√≠tico</option>
                        <option value="Penetra√ß√£o de Armadura">Penetra√ß√£o de Armadura</option>
                        <option value="Precis√£o">Precis√£o</option>
                        <option value="Alcance">Alcance</option>
                    </optgroup>
                    <optgroup label="üõ°Ô∏è DEFESA">
                        <option value="Defesa">Defesa</option>
                        <option value="Defesa F√≠sica">Defesa F√≠sica</option>
                        <option value="Defesa M√°gica">Defesa M√°gica</option>
                        <option value="Resist√™ncia">Resist√™ncia</option>
                        <option value="Bloqueio">Bloqueio</option>
                        <option value="Evas√£o">Evas√£o</option>
                        <option value="Redu√ß√£o de Dano">Redu√ß√£o de Dano</option>
                    </optgroup>
                    <optgroup label="‚ù§Ô∏è VITALIDADE">
                        <option value="Vida">Vida</option>
                        <option value="HP M√°ximo">HP M√°ximo</option>
                        <option value="Regenera√ß√£o de Vida">Regenera√ß√£o de Vida</option>
                        <option value="Roubo de Vida">Roubo de Vida</option>
                    </optgroup>
                    <optgroup label="üîÆ ENERGIA">
                        <option value="Mana">Mana</option>
                        <option value="Mana M√°xima">Mana M√°xima</option>
                        <option value="Regenera√ß√£o de Mana">Regenera√ß√£o de Mana</option>
                        <option value="Custo de Habilidade">Custo de Habilidade</option>
                    </optgroup>
                    <optgroup label="‚ö° VELOCIDADE">
                        <option value="Velocidade de Ataque">Velocidade de Ataque</option>
                        <option value="Velocidade de Movimento">Velocidade de Movimento</option>
                        <option value="Tempo de Recarga">Tempo de Recarga</option>
                    </optgroup>
                    <optgroup label="‚ú® ESPECIAL">
                        <option value="Sorte">Sorte</option>
                        <option value="Drop de Ouro">Drop de Ouro</option>
                        <option value="Experi√™ncia">Experi√™ncia</option>
                        <option value="Durabilidade">Durabilidade</option>
                    </optgroup>
                </select>
                <input type="number" placeholder="Valor" class="attr-value">
                <button class="btn-remove-attr" onclick="this.parentElement.remove()">‚úï</button>
            `;
            container.appendChild(newAttr);
        }

        function addEffect(itemId) {
            const container = document.getElementById(`${itemId}-effects`);
            const newEffect = document.createElement('div');
            newEffect.className = 'attr-input';
            newEffect.innerHTML = `
                <select class="effect-name" style="flex: 2;">
                    <option value="">Selecione o efeito</option>
                    <optgroup label="üî• FOGO">
                        <option value="Queima inimigos">Queima inimigos</option>
                        <option value="Explos√£o flamejante">Explos√£o flamejante</option>
                        <option value="Aura de fogo">Aura de fogo</option>
                        <option value="Incendeia √°rea">Incendeia √°rea</option>
                    </optgroup>
                    <optgroup label="‚ùÑÔ∏è GELO">
                        <option value="Congela inimigos">Congela inimigos</option>
                        <option value="Desacelera alvos">Desacelera alvos</option>
                        <option value="Tempestade de gelo">Tempestade de gelo</option>
                        <option value="Aura g√©lida">Aura g√©lida</option>
                    </optgroup>
                    <optgroup label="‚ö° RAIO">
                        <option value="Paralisa inimigos">Paralisa inimigos</option>
                        <option value="Corrente el√©trica">Corrente el√©trica</option>
                        <option value="Sobrecarga">Sobrecarga</option>
                        <option value="Tempestade">Tempestade</option>
                    </optgroup>
                    <optgroup label="‚ò†Ô∏è VENENO">
                        <option value="Envenena alvos">Envenena alvos</option>
                        <option value="Nuvem t√≥xica">Nuvem t√≥xica</option>
                        <option value="Corros√£o">Corros√£o</option>
                        <option value="Doen√ßa">Doen√ßa</option>
                    </optgroup>
                    <optgroup label="üíö CURA">
                        <option value="Regenera vida">Regenera vida</option>
                        <option value="Cura ao atacar">Cura ao atacar</option>
                        <option value="Aura de cura">Aura de cura</option>
                        <option value="Restaura√ß√£o">Restaura√ß√£o</option>
                    </optgroup>
                    <optgroup label="ü©∏ VAMP√çRICO">
                        <option value="Drena vida">Drena vida</option>
                        <option value="Roubo vamp√≠rico">Roubo vamp√≠rico</option>
                        <option value="Absor√ß√£o de alma">Absor√ß√£o de alma</option>
                    </optgroup>
                    <optgroup label="‚ú® LUZ">
                        <option value="Dano sagrado">Dano sagrado</option>
                        <option value="Cega inimigos">Cega inimigos</option>
                        <option value="Aura divina">Aura divina</option>
                        <option value="Purifica√ß√£o">Purifica√ß√£o</option>
                    </optgroup>
                    <optgroup label="üåë TREVAS">
                        <option value="Dano sombrio">Dano sombrio</option>
                        <option value="Amaldi√ßoa alvos">Amaldi√ßoa alvos</option>
                        <option value="Medo">Medo</option>
                        <option value="Corrup√ß√£o">Corrup√ß√£o</option>
                    </optgroup>
                    <optgroup label="üí• F√çSICO">
                        <option value="Atordoa inimigos">Atordoa inimigos</option>
                        <option value="Sangramento">Sangramento</option>
                        <option value="Perfura√ß√£o">Perfura√ß√£o</option>
                        <option value="Esmagamento">Esmagamento</option>
                    </optgroup>
                    <optgroup label="üõ°Ô∏è PROTE√á√ÉO">
                        <option value="Escudo m√°gico">Escudo m√°gico</option>
                        <option value="Reflete dano">Reflete dano</option>
                        <option value="Imunidade">Imunidade</option>
                        <option value="Barreira">Barreira</option>
                    </optgroup>
                    <optgroup label="üí® MOVIMENTO">
                        <option value="Aumenta velocidade">Aumenta velocidade</option>
                        <option value="Teleporte">Teleporte</option>
                        <option value="Dash">Dash</option>
                        <option value="Levita√ß√£o">Levita√ß√£o</option>
                    </optgroup>
                    <optgroup label="üîÆ M√ÅGICO">
                        <option value="Regenera mana">Regenera mana</option>
                        <option value="Amplifica magia">Amplifica magia</option>
                        <option value="Silencia inimigos">Silencia inimigos</option>
                        <option value="Explos√£o arcana">Explos√£o arcana</option>
                    </optgroup>
                    <optgroup label="üéØ UTILIT√ÅRIO">
                        <option value="Aumenta drop">Aumenta drop</option>
                        <option value="Dobra XP">Dobra XP</option>
                        <option value="Invisibilidade">Invisibilidade</option>
                        <option value="Vis√£o noturna">Vis√£o noturna</option>
                    </optgroup>
                    <optgroup label="üåü ESPECIAL">
                        <option value="Invoca√ß√£o">Invoca√ß√£o</option>
                        <option value="Transforma√ß√£o">Transforma√ß√£o</option>
                        <option value="Ressurrei√ß√£o">Ressurrei√ß√£o</option>
                        <option value="Controle mental">Controle mental</option>
                    </optgroup>
                </select>
                <input type="number" placeholder="N√≠vel" class="effect-level" min="1" max="10" value="1">
                <button class="btn-remove-attr" onclick="this.parentElement.remove()">‚úï</button>
            `;
            container.appendChild(newEffect);
        }

        function getItemData(itemId) {
            const name = document.getElementById(`${itemId}-name`).value;
            const type = document.getElementById(`${itemId}-type`).value;
            const material = document.getElementById(`${itemId}-material`).value;
            
            // Pega atributos
            const attrElements = document.querySelectorAll(`#${itemId}-attributes .attr-input`);
            const attributes = [];
            
            attrElements.forEach(elem => {
                const nameElem = elem.querySelector('.attr-name');
                const name = nameElem.tagName === 'SELECT' ? nameElem.value : nameElem.value;
                const value = parseInt(elem.querySelector('.attr-value').value) || 0;
                if (name && value) {
                    attributes.push({ name, value });
                }
            });

            // Pega efeitos customizados
            const effectElements = document.querySelectorAll(`#${itemId}-effects .attr-input`);
            const customEffects = [];
            
            effectElements.forEach(elem => {
                const nameElem = elem.querySelector('.effect-name');
                const name = nameElem.tagName === 'SELECT' ? nameElem.value : nameElem.value;
                const level = parseInt(elem.querySelector('.effect-level').value) || 1;
                if (name) {
                    customEffects.push({ name, level });
                }
            });

            return { name, type, material, attributes, customEffects };
        }

function fuseItems() {
    // 1. Coleta os dados dos 4 itens e filtra apenas os que foram preenchidos
    const ids = ['item1', 'item2', 'item3', 'item4'];
    const itemsToFuse = ids
        .map(id => getItemData(id))
        .filter(item => item.name.trim() !== "" && item.material.trim() !== "");

    // 2. Valida√ß√£o de seguran√ßa: M√≠nimo 2 itens
    if (itemsToFuse.length < 2) {
        alert('‚ö†Ô∏è Para fundir, preencha pelo menos 2 itens (Nome e Material)!');
        return;
    }

    // 3. Inicia a interface de resultado e a anima√ß√£o
    const resultDiv = document.getElementById('result');
    const contentDiv = document.getElementById('result-content');
    resultDiv.classList.add('show');
    contentDiv.innerHTML = `<div class="fusion-animation">‚ö° Fundindo ${itemsToFuse.length} Itens... üîÆ</div>`;

    // 4. Processamento da Fus√£o ap√≥s 1.5 segundos
    setTimeout(() => {
        let fusedAttributes = {};
        let materials = itemsToFuse.map(i => i.material);
        let allEffects = [];
        
        // Percorre todos os itens ativos para somar status e coletar efeitos
        itemsToFuse.forEach(item => {
            // Soma atributos
            item.attributes.forEach(attr => {
                fusedAttributes[attr.name] = (fusedAttributes[attr.name] || 0) + attr.value;
            });
            // Coleta efeitos especiais
            item.customEffects.forEach(eff => {
                allEffects.push(`‚ú® ${eff.name} (N√≠vel ${eff.level})`);
            });
        });

        const totalBaseStats = Object.values(fusedAttributes).reduce((a, b) => a + b, 0);
        
        // 5. C√°lculo de B√¥nus por Quantidade
        let multiplier = 1;
        if (itemsToFuse.length === 3) multiplier = 1.2; // +20%
        if (itemsToFuse.length === 4) multiplier = 1.5; // +50%

        const finalPower = Math.floor(totalBaseStats * multiplier);
        const rarity = fusionAI.calculateRarity(finalPower);
        
        // 6. Gerar nome √©pico baseado no primeiro item e quantidade
        const prefixos = ["", "", "Trindade de", "Tetra-Artefato de"];
        const nomeFinal = (itemsToFuse.length > 2 ? prefixos[itemsToFuse.length - 1] + " " : "Fus√£o de ") + itemsToFuse[0].name;

        // Registra o nome na lista de nomes criados
        fusionAI.nomesGerados.add(nomeFinal);

        // 7. Renderiza o HTML final do resultado
        contentDiv.innerHTML = `
            <div class="result-item">
                <h3>üíé ${nomeFinal}</h3>
                <div style="text-align: center;"><span class="rarity ${rarity}">${rarity.toUpperCase()}</span></div>
                <div style="text-align: center; margin: 15px 0;"><strong>Composi√ß√£o:</strong> ${materials.join(' + ')}</div>
                
                <div class="result-stats">
                    ${Object.entries(fusedAttributes).map(([name, value]) => `
                        <div class="stat-box">
                            <strong>${name}</strong>
                            <div>+${Math.floor(value * multiplier)}</div>
                        </div>
                    `).join('')}
                </div>

                ${allEffects.length > 0 ? `
                    <div class="effects-list">
                        <strong>üåü Efeitos da Fus√£o:</strong>
                        ${[...new Set(allEffects)].map(e => `<div>${e}</div>`).join('')}
                    </div>
                ` : ''}
                
                <div style="text-align: center; margin-top: 20px; border-top: 2px solid rgba(255,255,255,0.3); padding-top: 15px;">
                    <strong>üí™ Poder Total Final: ${finalPower}</strong>
                </div>
            </div>
            
            <div style="text-align: center; margin-top: 20px;">
                <button onclick="location.reload()" style="padding: 15px 30px; background: #667eea; color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer; margin-right: 10px;">
                    üîÑ Nova Fus√£o
                </button>
                <button onclick="mostrarNomesUsados()" style="padding: 15px 30px; background: #9b59b6; color: white; border: none; border-radius: 8px; font-size: 16px; cursor: pointer;">
                    üìã Ver Nomes Criados (${fusionAI.nomesGerados.size})
                </button>
            </div>
        `;
    }, 1500);
}

// Mostra a lista de itens j√° fundidos nesta sess√£o
function mostrarNomesUsados() {
    const nomes = Array.from(fusionAI.nomesGerados);
    if (nomes.length === 0) {
        alert('Nenhum item foi criado ainda!');
        return;
    }
    const lista = nomes.map((nome, i) => `${i + 1}. ${nome}`).join('\n');
    alert(`üìã NOMES J√Å CRIADOS:\n\n${lista}`);
}

// Inicializa√ß√£o (Ativa a busca de materiais nos 4 itens)
setupMaterialSearch('item1');
setupMaterialSearch('item2');
setupMaterialSearch('item3'); 
setupMaterialSearch('item4'); 

// Dados de exemplo iniciais para facilitar o teste
document.getElementById('item1-name').value = 'Espada Flamejante';
document.getElementById('item1-type').value = 'espada';
document.getElementById('item1-material').value = 'ferro';

document.getElementById('item2-name').value = 'Espada Infernal';
document.getElementById('item2-type').value = 'espada';
document.getElementById('item2-material').value = 'fogo';

// Garante que os cards 3 e 4 j√° tenham um campo de atributo para preencher
addAttribute('item3');
addAttribute('item4');
</script>
</body>
</html>
